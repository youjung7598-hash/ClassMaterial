
포폴에 어떻게 보여주면 좋은가?
- README/시연 영상/대시보드 스크린샷에 다음을 포함:
    1. 아키텍처 그림: App → `/metrics` → Prometheus → Grafana
    2. 대시보드 스샷: 트래픽/지연시간(p95)/에러율/CPU/메모리
    3. 알람 규칙 1~2개: 조건과 의도 설명
    4. 문제 상황 재현: 의도적 5xx/부하를 걸고 지표가 반응하는 모습
        
- 키워드(면접용 말거리):
    - “라벨로 경로/상태/모델별 분해가 가능”
    - “Counter는 rate로 봐야 함”, “지연은 Histogram p95로 본다”
    - “Pull 방식이라 타겟과 네트워크/ALLOWED_HOSTS 중요”
    - “SLO 관점(가용성/성능)으로 최소 알람 세팅”

# 1) 섹션 제목과 한줄 요약

**Monitoring — Traffic & Throughput (RPS)**  
FastAPI/Django에서 수집한 `fastapi_request_count_total`을 기반으로 **실시간 처리량(RPS)**, **에러 분해**, **최근 N분 총 건수**를 시각화하고 운영 판단에 사용.

---

# 2) 대시보드 패널 3종 (스크린샷 + 캡션)

각 패널 이미지를 붙이고, 아래 “쿼리/읽는 법/의도”를 캡션으로 짧게 써줘.

### (A) 전체 RPS

- **쿼리**
```
sum(rate(fastapi_request_count_total{endpoint!="/metrics"}[5m]))
```
    
- **읽는 법**: 최근 5분 창 기준 **초당 요청 수**. 단위는 `requests/sec`.
- **의도**: 트래픽 급증/급감 탐지(배포·이슈·마케팅 효과).
    

### (B) 메서드/상태코드별 RPS

- **쿼리**
```
sum by (method, status_code) (   rate(fastapi_request_count_total{endpoint!="/metrics"}[5m]) )
```
    
- **읽는 법**: GET-200/GET-500/POST-201 … 라인으로 분해.
- **의도**: **어떤 메서드/상태**에서 증가·오류가 나는지 즉시 식별.
    

### (C) 최근 N분 총 건수(볼륨)

- **쿼리**
```
sum(increase(fastapi_request_count_total{endpoint!="/metrics"}[5m]))
```
    
- **읽는 법**: 최근 5분(또는 1시간) 동안 **몇 건** 들어왔나.
- **의도**: 리포팅/집계, 시간대별 볼륨 비교.
    

> 패널 설정 팁: Unit은 (A)(B) `requests/sec(ops)`, (C) `short` 또는 `requests`.  
> `/metrics`는 수집 트래픽이라 제외.

---

# 3) 알람 & SLO(이 섹션에 연결)

- **알람 예**
    - **RPS 급감**: `sum(rate(...[5m])) < 10` for 5m → 서비스 다운/부하분산 이슈 감지
    - **5xx% > 1%** for 5m (이건 에러율 패널과 연계)
        
- **SLO 표기**
    - 30일 기준 **가용성 99.9%**, **5xx < 1%**, **p95 < 800ms**
    - “에러버짓” 문장 한 줄(월 허용 다운타임/오류 비율)
        
---

# 4) 재현/검증(간단히 한 줄)

“부하 생성 후 패널이 즉시 반응하는지 확인했다” 정도로 기록. (스크린샷 전/후 1장씩)

---

# 5) 해석 & 액션(짧은 사례 2~3줄)

- 예) “배포 직후 **GET-500 RPS 스파이크** 관찰 → 롤백으로 즉시 복구”
- 예) “야간에는 RPS↓, 아침 9–11시 피크 → 워커 수 자동 확장 규칙 조정”
    

---

# 6) 실수 방지 메모(작게)

- **Counter를 원시값으로 그리지 말 것** → `rate()/increase()` 사용
- **/metrics 제외** 안 하면 수집 트래픽이 부풀린다
- 창 길이 `[5m]`는 과도한 출렁임/둔감 사이의 절충치 (상황에 맞게 1–10m 조정)
    

---

# 7) README/PDF에 넣을 실제 블록(복붙용)

- **쿼리 블록 3개**(A/B/C)
- **각 패널 캡션**(무엇/단위/읽는 법/의도)
- **알람 문장 1–2개** + **SLO 문장 1개**
- **전/후 스샷**(부하 전후 혹은 정상/이상 비교)